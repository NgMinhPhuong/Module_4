<!DOCTYPE HTML>

<html>
   <head>
      <input>
      <button onclick="handle()">Click</button>
      <script type = "text/javascript">


         // function WebSocketTest() {
            
            if ("WebSocket" in window) {
               // alert("WebSocket is supported by your Browser!");
               
               // Let us open a web socket
               var ws = new WebSocket("ws://localhost:8080/myhandler");
               function handle(){
                  ws.send(document.querySelector('input').value)
               }
               ws.onopen = function() {
                  
                  // Web Socket is connected, send data using send()
                  //  ws.send("");
                  // alert("Message is sent...");
               };

               ws.onmessage = function (evt) {
                  console.log(evt)
                  var received_msg = evt.data;
                  let newTag = document.createElement("p");
                  newTag.innerText = received_msg;
                  document.body.appendChild(newTag)
               };

               ws.onclose = function() { 
                  
                  // websocket is closed.
                  alert("Connection is closed..."); 
               };
            } else {
              
               // The browser doesn't support WebSocket
               alert("WebSocket NOT supported by your Browser!");
            }
         // }
      </script>
		
   </head>
   
   <body>
<!--      <div id = "sse">-->
<!--         <a href = "javascript:WebSocketTest()">Run WebSocket</a>-->
<!--      </div>-->
      
   </body>
</html>